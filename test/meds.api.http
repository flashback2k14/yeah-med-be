### use this extension for testing the api:
###     https://marketplace.visualstudio.com/items?itemName=humao.rest-client
###

@baseUrl = http://localhost:3000

### LOGIN USER

# @name login

POST {{baseUrl}}/api/users/signin HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "email": "john@doe.test",
    "password": "supersavepassword"
}

### CREATE MED #1

POST {{baseUrl}}/api/meds HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "med #1",
    "description": "test med",
    "expiredAt": "1750608175451",
    "category": "cat #1",
    "location": "loc #1",
    "company": "comp #1"
}

### CREATE MED #2

POST {{baseUrl}}/api/meds HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "med #2",
    "description": "test med #2",
    "expiredAt": "1750608175461",
    "category": "cat #1",
    "location": "loc #1",
    "company": "comp #2",
    "inUse": true
}

### CREATE MED #3

POST {{baseUrl}}/api/meds HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "med #3",
    "description": "test med #3",
    "expiredAt": "1750608175461",
    "category": "cat #2",
    "location": "loc #2",
    "company": "comp #3"
}

### CREATE MED #4

POST {{baseUrl}}/api/meds HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "med #4",
    "description": "test med #4",
    "expiredAt": "1750608175461",
    "category": "cat #2",
    "location": "loc #2",
    "company": "comp #4"
}

### CREATE MED #5

POST {{baseUrl}}/api/meds HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "med #5",
    "description": "test med #5",
    "expiredAt": "1766610501000",
    "category": "cat #3",
    "location": "loc #3",
    "company": "comp #5"
}

### CREATE MED #6

POST {{baseUrl}}/api/meds HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "med #6",
    "description": "test med #6",
    "expiredAt": "1766610501000",
    "category": "cat #6",
    "location": "loc #6",
    "categoryColor": "#57df8a",
    "count": "99",
    "company": "comp #6"
}

### GET MEDS

# @name meds

GET {{baseUrl}}/api/meds HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

### GET CATEGORIES

GET {{baseUrl}}/api/meds/categories HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

### GET LOCATIONS

GET {{baseUrl}}/api/meds/locations HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}


### UPDATE MED #1

PUT {{baseUrl}}/api/meds/{{meds.response.body.$.[0].id}} HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "med #1 - updated",
    "description": "test med - updated",
    "productId": "1234",
    "expiredAt": "1750608175551",
    "category": "cat #1",
    "location": "loc #1",
    "company": "comp #1 - updated"
}

### PATCH

PATCH {{baseUrl}}/api/meds/{{meds.response.body.$.[0].id}}/inuse HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

### DELETE MED #1

DELETE {{baseUrl}}/api/meds/{{meds.response.body.$.[0].id}} HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}
