###
### use this extension for testing the api:
###     https://marketplace.visualstudio.com/items?itemName=humao.rest-client
###

@baseUrl = http://localhost:3000

### LOGIN USER

# @name login

POST {{baseUrl}}/api/users/signin HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "email": "john@doe.test",
    "password": "supersavepassword"
}


### CREATE

POST {{baseUrl}}/api/coupons HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "coupon #1",
    "website": "https://web.shop",
    "expiredAt": "1759583264000"
}

### READ

# @name co

GET {{baseUrl}}/api/coupons HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

### UPDATE #1

PUT {{baseUrl}}/api/coupons/{{co.response.body.$.[0].id}} HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}

{
    "name": "coupon #1 - updated",
    "website": "https://web.shop",
    "expiredAt": "1759583264000"
}

### DELETE #1

DELETE {{baseUrl}}/api/coupons/{{co.response.body.$.[0].id}} HTTP/1.1
Content-Type: application/json
Accept: application/json
x-user-id: {{login.response.body.user.userId}}